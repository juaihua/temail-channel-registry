<?xml version="1.0" encoding="UTF-8"?>
<configuration status="WARN">
  <properties>
    <property name="LOG_HOME">${env:log.path.prefix}</property>
    <property name="LOG_INFO_NAME">/app_log.log</property>
    <property name="BACKUP_INFO_NAME">app-%d{MM-dd-yyyy}-%i.log</property>
    <property name="LOG_ERROR_NAME">/err.log</property>
    <property name="BACKUP_ERROR_NAME">app-err-%d{MM-dd-yyyy}-%i.log</property>
  </properties>
  <appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="[%p][%date{yyyy-MM-dd HH:mm:ss.SSS}]%msg[%thread]([%c:%line])%n"/>
    </Console>
    <RollingFile name="AllLog" fileName="${LOG_HOME}/${LOG_INFO_NAME}" filePattern="${LOG_HOME}/${BACKUP_INFO_NAME}">
      <PatternLayout pattern="[%p][%date{yyyy-MM-dd HH:mm:ss.SSS}]%msg[%thread]([%c:%line])%n"/>
      <SizeBasedTriggeringPolicy size="50MB"/>
    </RollingFile>
    <RollingFile name="ErrLog" fileName="${LOG_HOME}/${LOG_ERROR_NAME}" filePattern="${LOG_HOME}/${BACKUP_ERROR_NAME}">
      <Filters>
        <ThresholdFilter level="warn" onMatch="ACCEPT" onMismatch="DENY"/>
      </Filters>
      <PatternLayout pattern="[%p][%date{yyyy-MM-dd HH:mm:ss.SSS}]%msg[%thread]([%c:%line])%n"/>
      <SizeBasedTriggeringPolicy size="50MB"/>
    </RollingFile>
  </appenders>
  <Loggers>
      <logger name="org.apache" level="ERROR" additivity="false"/>
      <logger name="org.springframework" level="ERROR" additivity="false"/>
      <logger name="com.mchange" level="ERROR" additivity="false"/>
      <logger name="org.apache.commons" level="ERROR" additivity="false"/>
    <root level="info">
      <appenderRef ref="AllLog"/>
      <appenderRef ref="ErrLog"/>
    </root>
  </Loggers>
</configuration>